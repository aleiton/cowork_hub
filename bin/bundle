#!/usr/bin/env ruby
# frozen_string_literal: true

# =============================================================================
# BUNDLE BINSTUB
# =============================================================================
#
# Bundler manages Ruby gem dependencies for this project.
# This binstub provides a project-specific entry point for Bundler.
#
# WHAT IS BUNDLER?
# Bundler reads the Gemfile, resolves all gem dependencies, and ensures
# the correct versions are loaded. Without Bundler, you'd have "dependency
# hell" where different projects need different versions of the same gem.
#
# COMMON COMMANDS:
#   - bundle install    : Install gems from Gemfile
#   - bundle update     : Update gems to latest versions
#   - bundle exec <cmd> : Run a command with the bundled gem environment
#   - bundle info <gem> : Show info about a bundled gem
#
# WHY THIS FILE EXISTS:
# This ensures that Bundler itself is loaded correctly, especially in
# environments where multiple Ruby versions might be installed.
#
# =============================================================================

ENV['BUNDLE_GEMFILE'] ||= File.expand_path('../Gemfile', __dir__)

bundle_binstub = File.expand_path('bundle', __dir__)

if File.file?(bundle_binstub)
  if File.read(bundle_binstub, 300).include?('This file was generated by Bundler')
    load(bundle_binstub)
  else
    abort("Your `bin/bundle` was not generated by Bundler, so this binstub cannot run.
Replace `bin/bundle` by running `bundle binstubs bundler --force`, then run this command again.")
  end
end

require 'rubygems'
require 'bundler/setup'

load Gem.bin_path('bundler', 'bundle')
